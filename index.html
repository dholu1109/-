<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Happy Birthday</title>

        <link rel="shortcut icon" href="flower.png" type="image/x-icon">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link
            href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
            rel="stylesheet">
        <link
            href="https://fonts.googleapis.com/css2?family=Coiny&family=Titan+One&display=swap"
            rel="stylesheet">
        <link
            href="https://fonts.googleapis.com/css2?family=Nerko+One&family=Sriracha&display=swap"
            rel="stylesheet">

        <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>

        <meta name="github" content="https://github.com/Aoudumber-Bade">

        <style>
/* ---------- original styles kept & small fixes + new additions (Responsive Updates) ---------- */
@import url('https://fonts.googleapis.com/css2?family=Coiny&family=Titan+One&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Nerko+One&family=Sriracha&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

*{ padding:0; margin:0; box-sizing:border-box; }
:root{
    --color-pink: #84cdee;
    --color-white: #fff;
    --color-black: #333;
    --color-text-pink: #FF7882;
    --color-heart: #FF7882;
    --color-bg-letter: #fff8e4;
    --color-border: #DACCBF;
}
html{ height:100%; }
body {
    position: relative;
    font-size: 16px;
    margin: 0;
    padding: 0;
    height: 100%;
    background: var(--color-pink);
    overflow-x: hidden; /* Prevent horizontal scroll on small screens */
}

::-webkit-scrollbar{
    display: none;
}

/* particle layer (behind everything) */
.particle-layer {
    pointer-events: none;
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: hidden;
}
.particle {
    position: absolute;
    top: -10vh;
    font-size: 12px;
    opacity: 0.9;
    color: #fff;
    transform: translate3d(0,0,0);
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}
@keyframes fall {
    to {
        transform: translate3d(0, 120vh, 0) rotate(360deg);
        opacity: 0.2;
    }
}

/* wrapper/content must sit above particle layer */
#wrapper{ position: relative; z-index: 2; min-height:100vh; overflow:hidden; }

/* Flags & main layout: Animation time reduced from 1.5s 2s to 0.8s 1s */
.flag__birthday{ display:flex; justify-content:space-between; transform:translateY(-200px); animation:translateYFlag 0.8s 1s forwards; }
@keyframes translateYFlag{ to{ transform: translateY(-10px); } }
.flag__birthday .flag__left{ transform: rotate(-10deg) translate(-20px,30px); }
.flag__birthday .flag__right{ transform: rotate(10deg) translate(20px,30px) scaleX(-1); }

/* Main content layout (made flexible) */
.content{
    width: 90%; /* narrower on desktop to centre better */
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    display: flex;
    padding-top: 3rem;
    align-items: center; /* vertical alignment */
    justify-content: space-around; /* spacing */
    gap: 30px;
}
.content .left, .content .right{
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    /* initial widths for desktop */
    width: 45%;
    max-width: 500px;
    min-width: 300px;
}
/* Ensure the left/right parts stack correctly on small screens later */


/* Button animation time reduced from 2s 16s to 1s 10s */
.left .btn{
    transform: scale(0);
    animation: scaleCricle 1s 8s forwards ease-in-out;
    display: flex;
    flex-direction: column; /* stack buttons */
    gap: 10px; /* space between buttons */
}
#btn__letter, #btn__book{
    position: relative;
    margin: 0; /* removed margin-top for stacked buttons */
    background-color: var(--color-text-pink);
    outline: none;
    padding: 8px 20px; /* increased padding for better touch targets */
    font-size: 1.1rem;
    border-radius: 50px;
    border: 3px solid var(--color-black);
    font-family: "Sriracha", cursive;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 2;
    transform: scale(1);
    transition: all .5s ease-in-out;
    white-space: nowrap;
}
#btn__letter:active, #btn__book:active{ transform: scale(0.9); }
#btn__letter i{ margin-left: 5px; }
#btn__book i{ margin-left: 6px; }
#btn__letter:hover, #btn__book:hover{ border-color: var(--color-heart); background-color: var(--color-heart); color: #fff; box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px; }
#btn__letter:hover i{ animation: rotateHeart 1s infinite linear; }
@keyframes rotateHeart{ 0%,50%, 100%{ transform: rotate(0deg); } 25%{ transform: rotate(12deg); } 75%{ transform: rotate(-12deg); } }


.title{ position: relative; width: 100%; display: flex; justify-content: center; font-family: "Titan One", sans-serif; font-size: 3rem; flex-direction: column; perspective: 1000px; }
.title .happy, .title .birthday{
    position: relative;
    text-shadow: 4px 4px var(--color-black), -4px 4px var(--color-black), 4px -4px var(--color-black), -4px -4px var(--color-black), 4px 8px 0 var(--color-black);
    font-weight: bold;
    display: flex;
    justify-content: center;
}
.title .happy{ color: var(--color-white); }
.title .happy span, .title .birthday span{ transform: translateY(50px); opacity: 0; visibility: hidden; animation: txtTranslateY .5s var(--t) forwards; }
@keyframes txtTranslateY{ 100%{ transform: translateY(0); opacity: 1; visibility: visible; } }
.title .birthday{ color: var(--color-text-pink); }

/* Hat animation time reduced from 4s 7s to 2s 3s */
.title .hat{ position: absolute; right: 45px; top: -350px; transform: rotate(-40deg); z-index: -1; animation: topHat 2s 3s forwards ease; }
@keyframes topHat{ 20%, 30%{ top: -30px; transform-origin: left; transform: rotate(-40deg); } 35%, 100%{ top: -30px; transform: rotate(0deg); } }

.date__of__birth, .name{ display: flex; justify-content:space-around; align-items: center; background-color: var(--color-text-pink); border-radius: 50px; margin-top: 20px; font-family: "Sriracha", cursive; padding: 0 10px; }
/* Date animation time reduced from 5s 9s to 3s 6s */
.date__of__birth{ border: 3px solid var(--color-black); position: relative; transform: translateY(-100px); z-index: -1; opacity: 0; visibility: hidden; width: 0px; animation: dateOfBirth 3s 6s forwards; }
@keyframes dateOfBirth{ 20%,40%{ width: 0px; height: 0; transform: translateY(0px); opacity: 1; visibility: visible; } 45%{ transform: translateY(0px); opacity: 1; visibility: visible; width: 300px; height: 0px; } 50%,100%{ transform: translateY(0px); opacity: 1; visibility: visible; width: 300px; height: 50px; } }
.name{ position: absolute; padding: 0px 20px; bottom: -20px; border: 3px solid var(--color-black); font-family: 'Dancing Script', cursive; white-space: nowrap; }
.date__of__birth span, .name span{ font-weight: bold; margin: 0px 10px; }
.date__of__birth span{ font-size: 1.2rem; } .name span{ font-size: 1.7rem; }
.date__of__birth i.fa-star { color: var(--color-white); } /* Added color for stars */

/* Image Box animation time reduced from 8s 7s to 3s 4s */
.right .box__account{ position: relative; transform: translateY(700px); animation: topBoxImage 3s 4s forwards ease-in; }
@keyframes topBoxImage{ to{ transform: translateY(0); } }
.content .right .image{ position: relative; width: 400px; height: 400px; border-radius: 50%; overflow: hidden; display: flex; align-items: center; border: 6px solid var(--color-black); }
.content .right .image img{ width: 100%; height: 100%; object-fit: cover; object-position: 50% 0%; } /* Added height: 100% for better fit */

/* Circle animation start time reduced from 15s to 10s */
.cricle{ position: absolute; top: 20px; right: 50px; display: flex; justify-content: center; align-items: center; transform: scale(0); animation: scaleCricle 3s 10s forwards ease-in-out; }
@keyframes scaleCricle{ 0%{ transform: scale(0); } 10%{ transform: scale(1.3); } 20%{ transform: scale(0.7); } 30%,100%{ transform: scale(1); } }
.text__cricle{ width: 100px; height: 100px; background-color: var(--color-text-pink); border-radius: 50%; border: 5px solid var(--color-black); display: flex; justify-content: center; align-items: center; animation: rotateCricle 5s linear infinite; }
@keyframes rotateCricle{ to{ transform: rotate(360deg); } }
.text__cricle span{ top: 0%; left: 50%; position: absolute; color: var(--color-black); transform: rotate(calc(var(--i) * 24deg)); transform-origin: 0 45px; font-family: "Sriracha", cursive; text-transform: uppercase; font-size: 0.7rem; }
.fa-heart{ color: var(--color-heart); filter: drop-shadow(0 0 3px var(--color-heart)); animation: scaleHeart 1s infinite linear; }
@keyframes scaleHeart{ 50%{ transform: scale(1.2); } }

.right .balloon_one{ position: absolute; top: -70px; left: -70px; animation: balloon1 2s infinite linear; }
@keyframes balloon1{ 0%, 50%,100%{ transform-origin: bottom right; transform: rotate(0deg); } 25%{ transform-origin: bottom right; transform: rotate(3deg); } 75%{ transform-origin: bottom right; transform: rotate(-3deg); } }
.right .balloon_two{ position: absolute; top: 170px; right: -65px; z-index: -1; transform: rotate(10deg); animation: balloon2 2s infinite linear; }
@keyframes balloon2 { 0%,50%,100%{ transform-origin: bottom left; transform: rotate(10deg); } 25%{ transform-origin: bottom left; transform: rotate(7deg); } 75%{ transform-origin: bottom left; transform: rotate(13deg); } }

/* Decoratives - animation start time reduced from 15s to 10s */
.decorate_star{ position: absolute; transform: scale(0); background-color: var(--color-white); clip-path: polygon(0 50%, 35% 35%, 50% 0, 65% 35%, 100% 50%, 65% 65%, 50% 100%, 35% 65%); animation: scaleCricle 3s var(--t) forwards, scaleStar 2s 10s infinite ease-in-out; }
.decorate_star.star1{ width: 20px; height: 20px; top: 75px; left: 15%; animation-delay: 10s; }
.decorate_star.star2{ width: 15px; height: 20px; top: 35px; right: 25%; animation-delay: 10.2s; }
.decorate_star.star3{ width: 14px; height: 14px; top: 290px; right: 10%; animation-delay: 10.4s; }
.decorate_star.star4{ width: 18px; height: 18px; bottom: 60px; left: 10%; animation-delay: 10.6s; }
.decorate_star.star5{ width: 16px; height: 18px; bottom: 140px; right: 30%; animation-delay: 10.8s; }
@keyframes scaleStar{ 25%{ transform: scale(0.8); } 50%{ transform: scale(1.1); } }

.decorate_flower--one{ position: absolute; top: 250px; left: 50px; transform: scale(0); animation: scaleCricle 3s 10s forwards ease-in-out; }
.decorate_flower--two{ position: absolute; top: 225px; right: 25%; transform: scale(0); animation: scaleCricle 3s 10.3s forwards ease-in-out; }
.decorate_flower--three{ position: absolute; top: 150px; right: 5%; transform: scale(0); animation: scaleCricle 3s 10.6s forwards ease-in-out; }
.decorate_bottom{ position: absolute; right: 0; bottom: -10px; }
.smiley__icon{ position: absolute; bottom: 180px; right: 5%; transform: scale(0); animation: scaleCricle 3s 10s forwards ease-in-out; }

/* boxMail (kept) */
.boxMail{ position: fixed; background: rgb(0, 0, 0, 0.8); width: 100%; height: 100%; opacity: 0; top: 0; display: flex; justify-content: center; align-items: center; transform: scale(0.3); visibility: hidden; transition: all 0.5s; z-index: 12000; }
.boxMail.active{ opacity: 1; visibility: visible; transform: scale(1); }
.boxMail .boxMail-container{ position: absolute; width: 750px; max-width: 90vw; height: 500px; max-height: 90vh; display: flex; margin: 0; transform: scale(0.9); perspective: 2000px; transition: all 0.5s; }
.boxMail .card1{ position: absolute; width: 50%; height: 100%; background: linear-gradient(to right, #FF7882, #FF7882 63%); color: white; display: flex; justify-content: center; align-items: center; flex-direction: column; }
.boxMail .card2{ position: relative; width: 50%; height: 100%; background: linear-gradient(to right, #e0e0e0, #ffffff 30%); }

/* letter modal (Fixes for letter modal & matching button style) */
.box__letter {
    display: none;
    position: fixed;
    inset: 0;
    background-color: rgba(0,0,0,0.6);
    z-index: 12001;
    align-items: center;
    justify-content: center;
}
.letter__border {
    width: 55vw;
    max-width: 820px;
    min-width: 320px;
    height: 450px;
    max-height: 90vh; /* added for vertical fit */
    background-color: var(--color-white);
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 6px 24px rgba(0,0,0,0.35);
    position: relative;
    display: flex;
    align-items: stretch;
    justify-content: center;
    overflow: hidden;
    transform: translateY(18px) scale(.99);
    opacity: 0;
    transition: transform .28s ease, opacity .28s ease;
}
.box__letter.open .letter__border { transform: translateY(0) scale(1); opacity: 1; }

.letter-close {
    position: absolute;
    right: 10px;
    top: 8px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background:#fff;
    border: none;
    font-size: 20px;
    cursor: pointer;
    z-index: 12002;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.letter-container{ width:100%; display:flex; gap:10px; height:100%; }
/* left side smaller to hold circular avatar */
.letter-left{ width: 240px; min-width: 150px; padding: 12px; box-sizing: border-box; border-right: 3px solid var(--color-border); display:flex; flex-direction:column; align-items:center; justify-content:flex-start; background: #fff; text-align: center; }
.letter-left .userImg{ width:100px; height:100px; border-radius:50%; overflow:hidden; border:6px solid #d8c6ad; background:#f9f6f1; display:flex; align-items:center; justify-content:center; margin-top:8px; }
.letter-left .userImg img{ width:100%; height:100%; object-fit:cover; display:block; }
.letter-left h4{ margin-top:10px; font-weight:700; font-family: 'Poppins', sans-serif; }
.letter-left h3{ font-family:'Dancing Script',cursive; font-size:28px; margin-top:6px; transform: rotate(-5deg); }

.letter-right{ flex:1; padding:12px; box-sizing: border-box; display:flex; flex-direction:column; align-items:flex-start; }
.title__letter{ text-align:left; font-family:'Dancing Script',cursive; font-size:28px; margin-bottom:4px; display:flex; align-items:center; gap:8px; }
.subtitle__letter{ font-family:'Poppins',sans-serif; font-size:14px; color:#666; margin-bottom:10px; }
.text__letter{ font-family:'Dancing Script',cursive; font-size:1.1rem; line-height:1.4; color:#333; max-height:100%; overflow:auto; padding-right: 5px; } /* Added small padding for scrollbar */

/* Book modal styles */
.bookModal{
    position:fixed; inset:0; display:flex; justify-content:center; align-items:center; background:rgba(0,0,0,0.85); z-index:11999; visibility:hidden; opacity:0; transition:all .25s;
}
.bookModal.open{ visibility:visible; opacity:1; z-index:11999; }

.book{
  width:900px; max-width:96vw; height:560px; max-height:92vh;
  background: linear-gradient(180deg,#fff,#fff); border-radius:12px;
  box-shadow:0 20px 60px rgba(0,0,0,.55); display:flex; flex-direction:column; overflow:hidden; position:relative;
  border: 1px solid rgba(0,0,0,0.06);
}
.book-header{ display:flex; justify-content:space-between; align-items:center; padding:12px 18px; background: linear-gradient(90deg,#FF808A,#FF6F8E); color:#fff; font-weight:700; }
.book-header strong{ font-family: 'Poppins', sans-serif; font-size:1.05rem; }

.book-pages{ flex:1; display:flex; align-items:center; justify-content:center; position:relative; background: linear-gradient(180deg,#fff8e4,#fff9ef); padding: 30px; }

.book-page{ position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:18px; opacity:0; transform:scale(.98); transition:all .35s; }
.book-page.active{ opacity:1; transform:scale(1); }

/* new photo frame */
.photo-frame {
  width: 320px; max-width:60vw; height:460px; max-height:78vh;
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  background: linear-gradient(180deg,#fff,#fff); border-radius:14px;
  padding:18px; box-shadow: 0 18px 36px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.6);
  transform-origin: center; transition: transform .28s ease, box-shadow .28s ease;
  border: 1px solid rgba(0,0,0,0.06);
}
.photo-frame:hover{ transform: translateY(-6px); box-shadow: 0 28px 56px rgba(0,0,0,0.32); }

.photo-frame img{
  width:100%; height: calc(100% - 72px); object-fit:cover; border-radius:10px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.22); display:block;
}
.photo-caption { margin-top:12px; text-align:center; font-family:'Dancing Script',cursive; font-size:1.05rem; color:#4b4b4b; }

.book-footer{ display:flex; justify-content:space-between; align-items:center; padding:12px 18px; background:#fff; border-top:1px solid rgba(0,0,0,0.03); }
.book-controls { display:flex; gap:10px; align-items:center; }
.btn-ctrl{ padding:8px 12px; border-radius:10px; border:none; cursor:pointer; background:#fff; box-shadow:0 6px 14px rgba(0,0,0,0.08); display:inline-flex; gap:8px; align-items:center; font-weight:600; }
.btn-ctrl:disabled{ opacity:.45; cursor:not-allowed; filter:grayscale(.2); }
.btn-ctrl:not(:disabled):hover{ transform:translateY(-2px); box-shadow:0 12px 22px rgba(0,0,0,0.12); }
#pageIndicator{ font-size:14px; color:#222; font-weight:500; }

/* secret message icon size and opacity increased, position LEFT */
.secret-icon {
    position: fixed;
    left: 20px; /* Positioned left */
    bottom: 20px; /* Increased offset from edge */
    width: 48px; /* Increased size from 36px */
    height: 48px; /* Increased size from 36px */
    border-radius: 50%;
    background: rgba(255,255,255,1.0); /* Increased opacity from 0.8 to 1.0 */
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index: 13000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25); /* Stronger shadow */
    font-size: 1.5rem; /* Make the star icon inside larger */
    animation: pulseGlow 2.5s infinite ease-in-out;
}

@keyframes pulseGlow {
    0%, 100% {
        /* Base glow: wider spread, high opacity */
        box-shadow: 0 0 15px 4px rgba(255, 120, 130, 0.8), 
                    0 4px 12px rgba(0,0,0,0.35);
    }
    50% {
        /* Peak glow: higher spread, nearly full opacity, stronger color */
        box-shadow: 0 0 25px 8px rgba(255, 120, 130, 1), 
                    0 6px 20px rgba(0,0,0,0.45);
    }
}

.secret-modal {
    position: fixed;
    inset: 0;
    display:none;
    align-items:center;
    justify-content:center;
    background: rgba(0,0,0,0.6);
    z-index:13001;
}
.secret-card {
    width: 420px;
    max-width: 92%;
    background: #fff;
    border-radius: 12px;
    padding: 18px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
    font-family: 'Poppins', sans-serif;
}
.secret-close { float: right; cursor:pointer; font-size:18px; }

/* typing for secret message */
.secret-text { font-family: 'Dancing Script', cursive; font-size: 1.1rem; color:#222; min-height:60px; max-height: 70vh; overflow-y: auto; } /* Added max-height and overflow */

/* music player: Transformed into a small icon on the right */
.music-player {
    position: fixed;
    right: 20px; /* Positioned right, matching secret icon's offset */
    left: auto; /* Removing left: 50% */
    transform: none; /* Removing transform: translateX(-50%) */
    bottom: 20px;
    z-index: 13000;
    
    /* Make it look like a small icon */
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(255,255,255,1.0);;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 0; /* Remove existing padding */
}

/* Style the button inside the new icon player */
.music-player .play-btn {
    background: none; /* Remove background */
    color:var(--color-text-pink);
    border:none;
    padding: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%; /* Make button circular */
    font-size: 1.3rem;
}

/* Hide unused progress bar and time label */
.music-player .progress,
#timeLabel {
    display: none;
}


/* ==================================== */
/* === RESPONSIVE MEDIA QUERIES === */
/* ==================================== */

/* --- 1. Extra Large Screens (Desktop/Large Monitors) --- */
@media (min-width: 1200px) {
    .content{
        width: 80%;
        padding-top: 5rem;
    }
    .title {
        font-size: 4rem;
    }
    /* Adjusted decorations for large screen area */
    .decorate_star.star1{ top: 100px; left: 10%; }
    .decorate_star.star2{ top: 50px; right: 20%; }
    .decorate_star.star3{ top: 350px; right: 5%; }
    .decorate_star.star4{ bottom: 80px; left: 5%; }
    .decorate_star.star5{ bottom: 180px; right: 25%; }
    .decorate_flower--one{ top: 300px; left: 80px; }
    .decorate_flower--two{ top: 250px; right: 20%; }
    .decorate_flower--three{ top: 180px; right: 8%; }
}

/* --- 2. Small/Medium Screens (Tablets & smaller Laptops) --- */
@media (max-width: 880px) {
    /* Main Layout: Stack Left (Text/Buttons) and Right (Image) */
    .content {
        flex-direction: column;
        justify-content: center;
        gap: 40px;
        padding-top: 1rem;
        width: 100%;
    }
    .content .left, .content .right {
        width: 90%;
        max-width: 450px; /* constraining width for better mobile layout */
        min-width: 0;
    }
    .content .right { order: -1; /* Image/Box on top */ }

    /* Flags adjustment */
    .flag__birthday img { width: 250px; }
    .flag__birthday .flag__left { transform: rotate(-10deg) translate(-10px,10px); }
    .flag__birthday .flag__right { transform: rotate(10deg) translate(10px,10px) scaleX(-1); }

    /* Title size reduction */
    .title { font-size: 2.5rem; letter-spacing: 2px; }

    /* Date adjustment */
    @keyframes dateOfBirth{ 50%,100%{ transform: translateY(0px); opacity: 1; visibility: visible; width: 250px; height: 40px; } }
    .date__of__birth{ width: 250px; height: 40px; }
    .date__of__birth span { font-size: 1rem; margin: 0 5px; }
    .name span { font-size: 1.5rem; }

    /* Image size reduction */
    .content .right .image { width: 280px; height: 280px; border-width: 5px; }
    .name { padding: 0 15px; bottom: -15px; }

    /* Circle/Balloon/Hat repositioning relative to the smaller main image */
    .cricle { top: -40px; right: 0px; transform: scale(.8); }
    .right .balloon_one { top: -100px; left: -20px; transform: scale(.8); }
    .right .balloon_two { top: 100px; right: -50px; transform: scale(.8) rotate(10deg); }
    .title .hat { right: 20px; top: -350px; transform: rotate(-40deg) scale(.8); }
    @keyframes topHat{ 20%, 30%{ top: -30px; transform-origin: left; transform: rotate(-40deg) scale(.8); } 35%, 100%{ top: -30px; transform: rotate(0deg) scale(.8); } }

    /* Modal adjustments */
    .book{ height: 82vh; }
    .photo-frame{ width: 48vw; height: 66vh; }
    .letter__border { width: 90vw; height: 420px; }
    .letter-left { width: 120px; padding: 8px; font-size: 14px; }
    .letter-left .userImg { width: 80px; height: 80px; border-width: 4px; }
    .letter-left h3 { font-size: 20px; }
    .title__letter { font-size: 24px; }
    .text__letter { font-size: 1rem; }
    .decorate_bottom{ bottom: 0; }
    .smiley__icon{ bottom: 10px; right: 20px; }
}

/* --- 3. Extra Small Screens (Mobile Portrait) --- */
@media (max-width: 520px) {
    body { font-size: 14px; }
    .title { font-size: 2rem; letter-spacing: 0px; }
    .flag__birthday img { width: 180px; }
    .flag__birthday .flag__left { transform: rotate(-10deg) translate(-20px,15px); }
    .flag__birthday .flag__right { transform: rotate(10deg) translate(20px,15px) scaleX(-1); }
    .content { padding-top: 1rem; gap: 20px; }

    /* Image size reduction on XS */
    .content .right .image { width: 220px; height: 220px; border-width: 4px; }
    .name { font-size: 1.2rem; padding: 0 10px; bottom: -10px; }

    /* Buttons: still stacked but text adjusted */
    #btn__letter, #btn__book { font-size: 1rem; padding: 6px 15px; }

    /* Circle/Balloon/Hat adjustment for tiny screens */
    .cricle { top: -50px; right: -10px; transform: scale(.7); }
    .right .balloon_one { top: -70px; left: -10px; transform: scale(.7); }
    .right .balloon_two { top: 70px; right: -30px; transform: scale(.7) rotate(10deg); }
    .title .hat { right: 10px; transform: scale(.65) rotate(0deg); animation: none; } /* Removed animation for XS for simplicity */

    /* Modal adjustments */
    .book{ width:98vw; height:88vh; border-radius:10px; }
    .book-header{ padding:10px 12px; }
    .book-footer{ padding:10px 12px; }
    .photo-frame{ width:78vw; height:62vh; padding:12px; }

    .letter__border { width: 95vw; height: auto; max-height: 90vh; }
    .letter-container { flex-direction: column; } /* Stack left/right content in letter on XS */
    .letter-left { width: 100%; border-right: none; border-bottom: 2px solid var(--color-border); padding-bottom: 12px; }
    .letter-left .userImg { margin-top: 0; }
    .letter-right { flex: none; padding-top: 0; }
    .text__letter { font-size: 1rem; max-height: 250px; }

    /* Music Player Adjustment */
    .music-player { width: 40px; height: 40px; right: 15px; bottom: 15px; }
    .music-player .play-btn { font-size: 1.1rem; }
}

/* --- Final Cleanup of redundant/old media query (since 880px and 520px cover it) --- */
/* The original 658px media query block is now mostly obsolete due to the new structure, but keeping essential flag/title fix if any. */
@media screen and (max-width: 658px) {
     .flag__birthday .flag__left { transform: rotate(-10deg) translate(-10px,15px); }
     .flag__birthday .flag__right { transform: rotate(10deg) translate(10px,15px) scaleX(-1); }
}
        </style>
    </head>
    <body>
        <div class="particle-layer" id="particleLayer" aria-hidden="true"></div>

        <div id="wrapper">
            <div class="flag__birthday">
                <img src="1.png" alt width="350" class="flag__left">
                <img src="1.png" alt width="350" class="flag__right">
            </div>

            <div class="content">
                <div class="left">
                    <div class="title">
                        <h1 class="happy">
                            <span style="--t: 2s;">H</span>
                            <span style="--t: 2.1s;">a</span>
                            <span style="--t: 2.2s;">p</span>
                            <span style="--t: 2.3s;">p</span>
                            <span style="--t: 2.4s;">y</span>
                        </h1>
                        <h1 class="birthday">
                            <span style="--t: 2.5s;">B</span>
                            <span style="--t: 2.6s;">i</span>
                            <span style="--t: 2.7s;">r</span>
                            <span style="--t: 2.8s;">t</span>
                            <span style="--t: 2.9s;">h</span>
                            <span style="--t: 3s;">d</span>
                            <span style="--t: 3.1s;">a</span>
                            <span style="--t: 3.2s;">y</span>
                        </h1>
                        <div class="hat">
                            <img src="hat.png" alt width="130">
                        </div>
                    </div>

                    <div class="date__of__birth">
                        <span></span>
                    </div>

                    <div class="btn">
                        <button id="btn__letter">
                            <div class="mail">
                                Click Here
                                <i class="fa-regular fa-envelope"></i>
                            </div>
                        </button>

                        <button id="btn__book">
                            <div class="mail">
                                Open Book
                                <i class="fa-solid fa-book-open"></i>
                            </div>
                        </button>
                    </div>
                </div>

                <div class="right">
                    <div class="box__account">
                        <div class="image">
                            <img src="avatar.png" alt>
                        </div>
                        <div class="name">
                            <i class="fa-solid fa-heart"></i>
                            <span>Dear Anjali</span>
                            <i class="fa-solid fa-heart"></i>
                        </div>
                        <div class="balloon_one">
                            <img width="100px" src="balloon1.png" alt>
                        </div>
                        <div class="balloon_two">
                            <img width="100px" src="balloon2.png" alt>
                        </div>
                    </div>

                    <div class="cricle">
                        <div class="text__cricle">
                            <span style="--i: 1;">h</span>
                            <span style="--t:2; --i: 2;">a</span>
                            <span style="--i: 3;">p</span>
                            <span style="--i: 4;">p</span>
                            <span style="--i: 5;">y</span>
                            <span style="--i: 6;">-</span>
                            <span style="--i: 7;">b</span>
                            <span style="--i: 8;">i</span>
                            <span style="--i: 9;">r</span>
                            <span style="--i: 10;">t</span>
                            <span style="--i: 11;">h</span>
                            <span style="--i: 12;">d</span>
                            <span style="--i: 13;">a</span>
                            <span style="--i: 14;">y</span>
                            <span style="--i: 15;">-</span>
                        </div>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                </div>
            </div>

            <div class="decorate_star star1" style="--t: 10s;"></div>
            <div class="decorate_star star2" style="--t: 10.2s;"></div>
            <div class="decorate_star star3" style="--t: 10.4s;"></div>
            <div class="decorate_star star4" style="--t: 10.6s;"></div>
            <div class="decorate_star star5" style="--t: 10.8s;"></div>

            <div class="decorate_flower--one" style="--t: 10s;"><img width="20"
                    src="decorate_flower.png" alt></div>
            <div class="decorate_flower--two" style="--t: 10.3s;"><img
                    width="20" src="decorate_flower.png" alt></div>
            <div class="decorate_flower--three" style="--t: 10.6s;"><img
                    width="20" src="decorate_flower.png" alt></div>
            <div class="decorate_bottom"><img src="decorate.png" alt
                    width="100"></div>
            <div class="smiley__icon"><img src="smiley_icon.png" alt
                    width="100"></div>

            <div class="boxMail">
                <i class="fa-solid fa-xmark"></i>
                <div class="boxMail-container">
                    <div class="card1">
                        <div class="userImg"><img src="avatar.png"
                                alt></div>
                        <h4 class="username">To: Anjali üíñ<span
                                class="underline"></span></h4>
                        <h3>Happy Birthday</h3>
                        <div class="imageCute"><img src="cute1.png" alt></div>
                    </div>
                    <div class="card2">
                        <div class="card2-content">
                            <h3>For You!</h3>
                            <h2></h2>
                            <div class="imageCute2"><img src="cute2.png"
                                    alt></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box__letter" id="letterBox" aria-hidden="true">
                <div class="letter__border" role="dialog" aria-modal="true">
                    <button class="letter-close" id="letterClose"
                        aria-label="Close">√ó</button>

                    <div class="letter-container">
                        <div class="letter-left">
                            <div class="userImg">
                                <img id="avatarImg" src="avatar.png"
                                    alt="avatar">
                            </div>
                            <h4 class="username">To: Anjali üíñ</h4>
                            <h3>Happy Birthday</h3>
                        </div>

                        <div class="letter-right">
                            <div class="subtitle__letter">A little letter</div>
                            <div class="title__letter"> For you <i
                                    class="fa-solid fa-heart"
                                    style="color:#FF7882;margin-left:6px;"></i></div>

                            <div class="text__letter"><p></p></div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="bookModal" id="bookModal" aria-hidden="true">
                <div class="book" role="dialog" aria-modal="true">
                    <div class="book-header">
                        <strong>Photo Book</strong>
                        <div><button class="book-close" id="closeBook"><i
                                    class="fa-solid fa-xmark"></i></button></div>
                    </div>

                    <div class="book-pages" id="bookPages"></div>

                    <div class="book-footer">
                        <div class="book-controls">
                            <button class="btn-ctrl" id="prevPage"><i
                                    class="fa-solid fa-chevron-left"></i>
                                Prev</button>
                            <button class="btn-ctrl" id="nextPage">Next <i
                                    class="fa-solid fa-chevron-right"></i></button>
                        </div>
                        <div id="pageIndicator">1 / 5</div>
                    </div>
                </div>
            </div>

        </div>

        <div class="secret-icon" id="secretIcon" title="Secret">
            <i class="fa-solid fa-star fa-shake" style="color:#FF7882;"></i>
        </div>

        <div class="secret-modal" id="secretModal" aria-hidden="true">
            <div class="secret-card">
                <div
                    style="display:flex; align-items:center; justify-content:space-between;">
                    <strong>Secret Message</strong>
                    <span class="secret-close" id="secretClose">&times;</span>
                </div>
                <div style="height:8px"></div>
                <div class="secret-text" id="secretText"></div>
            </div>
        </div>

        <div class="music-player" id="musicPlayer">
            <button class="play-btn" id="musicToggle">
                <i class="fa-solid fa-play" id="musicIcon"></i>
            </button>

            <div class="progress" id="musicProgress"><div class="bar"
                    id="musicBar"></div></div>
            <div id="timeLabel" style="font-size:13px;color:#333;">0:00</div>

            <audio id="bgAudio" loop>
                <source src="" type="audio/mpeg">
            </audio>
        </div>

        <script>
    (function () {
      // TEXTS
      const datetxt = "11 December";
      const datatxtletter = "Dear, You are a very special Soul. I always silently thank you. Today, I wish you all the best, lots of health, and lots of joy. Happiest birthday to you.üíï";
      const titleLetter = "To you";

      // CHAR ARRAYS
      const charArrDate = datetxt.split('');
      const charArrDateLetter = datatxtletter.split('');
      const charArrTitle = titleLetter.split('');

      // INDICES
      let currentIndex = 0;
      let currentIndexLetter = 0;
      let currentIndexTitle = 0;

      // book pages data (only declared once)
      const pages = [
        'pic1.jpg',
        'pic2.jpg',
        'pic3.jpg',
        'pic4.jpg',
        'pic5.jpg'
      ];
      let current = 0; // current page index

      // ELEMENTS
      const dateSpan = document.querySelector(".date__of__birth span");
      const titleLetterEl = document.querySelector(".title__letter");
      const textLetterP = document.querySelector(".text__letter p");

      // letter modal elements
      const letterBox = document.getElementById('letterBox');        // overlay container
      const letterCloseBtn = document.getElementById('letterClose');   // close button inside overlay

      // book modal elements
      const bookBtn = document.getElementById('btn__book');
      const bookModal = document.getElementById('bookModal');
      const bookPagesContainer = document.getElementById('bookPages');
      const prevBtn = document.getElementById('prevPage');
      const nextBtn = document.getElementById('nextPage');
      const pageIndicator = document.getElementById('pageIndicator');
      const closeBookBtn = document.getElementById('closeBook');

      // ------------------ date typing (Delay reduced from 12000ms to 7000ms) ------------------
      setTimeout(function () {
        const dt = setInterval(function () {
          if (currentIndex < charArrDate.length) {
            if (dateSpan) dateSpan.textContent += charArrDate[currentIndex++];
          } else {
            // add stars once done
            const iEl = document.createElement("i");
            iEl.className = "fa-solid fa-star";
            const dateWrap = document.querySelector(".date__of__birth");
            if (dateWrap) {
              dateWrap.prepend(iEl);
              dateWrap.appendChild(iEl.cloneNode(true));
            }
            clearInterval(dt);
          }
        }, 100);
      }, 7000); // UPDATED DELAY HERE

      // ------------------ Letter modal: open/close & typing ------------------
      let intervalTitle = null;
      let intervalContent = null;

      function openLetter() {
        if (!letterBox) return;

        // put the photo inside avatar circle (replace src if you want a different image)
        const avatar = document.getElementById('avatarImg');
        if (avatar) avatar.src = 'avatar.png';

        // show overlay
        letterBox.style.display = 'flex';
        setTimeout(()=> letterBox.classList.add('open'), 20);

        // type title
        if (titleLetterEl) {
          titleLetterEl.textContent = '';
          currentIndexTitle = 0;
          intervalTitle = setInterval(()=> {
            if (currentIndexTitle < charArrTitle.length) {
              titleLetterEl.textContent += charArrTitle[currentIndexTitle++];
            } else {
              clearInterval(intervalTitle);
            }
          }, 100);
        }

        // type content into the right column (subtitle is already static)
        setTimeout(()=> {
          if (textLetterP) {
            textLetterP.textContent = "";
            currentIndexLetter = 0;
            intervalContent = setInterval(()=> {
              if (currentIndexLetter < charArrDateLetter.length) {
                textLetterP.textContent += charArrDateLetter[currentIndexLetter++];
              } else {
                clearInterval(intervalContent);
              }
            }, 45);
          }
        }, 900);

        // try to start music on open (user interaction friendly)
        tryPlayAudio();
      }

      function closeLetter() {
        if (intervalTitle) { clearInterval(intervalTitle); intervalTitle = null; }
        if (intervalContent) { clearInterval(intervalContent); intervalContent = null; }
        if (titleLetterEl) titleLetterEl.textContent = "";
        if (textLetterP) textLetterP.textContent = "";
        currentIndexLetter = 0; currentIndexTitle = 0;
        if (!letterBox) return;
        letterBox.classList.remove('open');
        setTimeout(()=> letterBox.style.display = 'none', 260);
      }

      // bind letter button
      const letterBtn = document.getElementById('btn__letter');
      if (letterBtn) {
        letterBtn.addEventListener('click', function (ev) {
          ev.preventDefault();
          openLetter();
        });
      }

      if (letterCloseBtn) letterCloseBtn.addEventListener('click', closeLetter);
      if (letterBox) {
        letterBox.addEventListener('click', function (e) { if (e.target === letterBox) closeLetter(); });
      }

      // ------------------ Book modal logic (renderPages updated to use .photo-frame) ------------------
      function renderPages() {
        if (!bookPagesContainer) return;
        bookPagesContainer.innerHTML = '';
        pages.forEach((src, i)=> {
          const page = document.createElement('div');
          page.className = 'book-page' + (i === current ? ' active' : '');
          page.dataset.index = i;

          // create photo-frame container and caption (new design)
          const frame = document.createElement('div');
          frame.className = 'photo-frame';

          const img = document.createElement('img');
          img.src = src;
          img.alt = `Page ${i+1}`;

          const cap = document.createElement('div');
          cap.className = 'photo-caption';
          cap.textContent = `Page ${i+1}`;

          frame.appendChild(img);
          frame.appendChild(cap);

          page.appendChild(frame);
          bookPagesContainer.appendChild(page);
        });
        updateBookControls();
      }
      function updateBookControls() {
        document.querySelectorAll('.book-page').forEach(p => p.classList.toggle('active', Number(p.dataset.index) === current));
        if (pageIndicator) pageIndicator.textContent = `${current+1} / ${pages.length}`;
        if (prevBtn) prevBtn.disabled = current === 0;
        if (nextBtn) nextBtn.disabled = current === pages.length - 1;
      }
      function openBook(start=0) {
        current = start; renderPages();
        if (!bookModal) return;
        bookModal.classList.add('open'); bookModal.setAttribute('aria-hidden','false');
        tryPlayAudio();
      }
      function closeBook() { if (!bookModal) return; bookModal.classList.remove('open'); bookModal.setAttribute('aria-hidden','true'); }

      if (prevBtn) prevBtn.addEventListener('click', ()=> { if (current>0) current--; updateBookControls(); });
      if (nextBtn) nextBtn.addEventListener('click', ()=> { if (current < pages.length-1) current++; updateBookControls(); });
      if (bookBtn) bookBtn.addEventListener('click', ()=> openBook(0));
      if (closeBookBtn) closeBookBtn.addEventListener('click', closeBook);
      if (bookModal) bookModal.addEventListener('click', (e)=> { if (e.target === bookModal) closeBook(); });

      // ------------------ particles generation ------------------
      const particleLayer = document.getElementById('particleLayer');
      const particleChars = ['‚ú¶','‚ú∂','‚ú∫','‚ú∑','‚ùÖ','‚úµ','‚úª']; // stars/snow shapes
      function spawnParticles(count=30){
        if (!particleLayer) return;
        for(let i=0;i<count;i++){
          const el = document.createElement('div');
          el.className = 'particle';
          el.style.left = (Math.random()*100) + '%';
          const size = (6 + Math.random()*18).toFixed(1);
          el.style.fontSize = size + 'px';
          el.style.opacity = (0.3 + Math.random()*0.8).toFixed(2);
          const char = particleChars[Math.floor(Math.random()*particleChars.length)];
          el.textContent = char;
          const duration = (6 + Math.random()*10).toFixed(1) + 's';
          el.style.animationDuration = duration;
          el.style.animationDelay = (Math.random()*5) + 's';
          particleLayer.appendChild(el);
          setTimeout(()=> { if (el && el.parentNode) el.parentNode.removeChild(el); }, 45000);
        }
        setTimeout(()=> spawnParticles(Math.round(10 + Math.random()*20)), 6000 + Math.random()*5000);
      }
      spawnParticles(40);

      // ------------------ secret message logic (password-protected) ------------------
      const secretIcon = document.getElementById('secretIcon');
      const secretModal = document.getElementById('secretModal');
      const secretClose = document.getElementById('secretClose');
      const secretText = document.getElementById('secretText');
      const secretMessage = "Hey Rosiee ‚Äî If you're seeing this means you've found the hidden message, Hope, You're doing well ! I just want to say sorry for all of the shitty mistakes i've done. I've realized all of my mistakes and where did i go wrong and i really mean it. believe me I've died every fuckin night after that month without you... i don't know why but tumhe khone ka dar abhi bhi horha hai although kaafi had tak kho diya hai mene tumhe,i don't know how to say it but i really don't wanna lose you, but i think it's too late and don't worry i'm not pressurizing you i'm just confessing my mistakes and realizations wo sayad sahi hi kehte hai jab log paas rehte hai tb dhang se value nahi hota but door jaane ke baad realize hota hai i think mere liye hi hai ye.. but again i'm really sorry i know isse jo mene kiya wo change nahi hone wala but i think i'm confessing all of my mistakes and i've changed and i mean it, although i'll always look forward for your response. and you're amazing. Keep shining.‚ú®\nAlways here for you. ‚Äî With love.(I'll always hate you)";

      function openSecret(){
        if (!secretModal) return;
        secretModal.style.display = 'flex';
        secretText.textContent = '';
        let idx = 0;
        const arr = secretMessage.split('');
        const t = setInterval(()=> {
          if (idx < arr.length) { secretText.textContent += arr[idx++]; }
          else clearInterval(t);
        }, 38);
      }
      function closeSecret(){ if (!secretModal) return; secretModal.style.display = 'none'; secretText.textContent = ''; }

      // NEW: password prompt on click (only open if code === "1109")
      if (secretIcon) secretIcon.addEventListener('click', function () {
        try {
          const userCode = prompt('Enter Special Code:');
          if (userCode === null) return; // user cancelled
          if (String(userCode).trim() === '1109') {
            openSecret();
          } else {
            alert('Incorrect code. Try again.');
          }
        } catch (err) {
          // fallback: if prompt not allowed, do nothing
          console.error(err);
        }
      });

      if (secretClose) secretClose.addEventListener('click', closeSecret);
      if (secretModal) secretModal.addEventListener('click', function(e){ if (e.target===secretModal) closeSecret(); });

      // ------------------ music player logic ------------------
      const audio = document.getElementById('bgAudio');
      const musicToggle = document.getElementById('musicToggle');
      const musicIcon = document.getElementById('musicIcon');
      
      const MAX_VOLUME = 0.08; // UPDATED: Very low maximum volume (8%)
      const FADE_STEP = 0.005;
      
      function formatTime(s){
        const m = Math.floor(s / 60);
        const sec = Math.floor(s % 60).toString().padStart(2,'0');
        return `${m}:${sec}`;
      }

      function tryPlayAudio(){
        if (!audio) return;
        audio.play().then(()=> {
          musicIcon.className = 'fa-solid fa-pause';
        }).catch(()=> {
          // autoplay blocked ‚Äî fine
        });
      }

      if (musicToggle){
        musicToggle.addEventListener('click', function(){
          if (!audio) return;
          if (audio.paused){
            audio.play().then(()=> { musicIcon.className = 'fa-solid fa-pause'; }).catch(()=>{});
          } else {
            audio.pause();
            musicIcon.className = 'fa-solid fa-play';
          }
        });
      }

      if (audio){
        // Removed timeupdate listener since progress/time are hidden.
        /*
        audio.addEventListener('timeupdate', function(){
          if (!audio.duration || !progressBar) return;
          const pct = (audio.currentTime / audio.duration) * 100;
          progressBar.style.width = pct + '%';
          timeLabel.textContent = formatTime(audio.currentTime);
        });
        */
        audio.addEventListener('ended', function(){ musicIcon.className = 'fa-solid fa-play'; });
      }

      ['btn__letter','btn__book'].forEach(id => {
        const b = document.getElementById(id);
        if (b) b.addEventListener('click', tryPlayAudio);
      });

      document.addEventListener('keydown', function(e){
        if (e.code === 'Space' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA'){
          e.preventDefault();
          musicToggle && musicToggle.click();
        }
        if (e.key === 'Escape') {
          if (secretModal && secretModal.style.display === 'flex') closeSecret();
          if (letterBox && letterBox.style.display === 'flex') document.getElementById('letterClose').click();
          if (bookModal && bookModal.classList.contains('open')) document.getElementById('closeBook').click();
        }
      });

      // initial render for book
      renderPages();

    })();
        </script>
    </body>

</html>

